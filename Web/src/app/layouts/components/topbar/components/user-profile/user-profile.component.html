<div class="topbar-item nav-user">
    <div ngbDropdown [placement]="'bottom-end'" class="dropdown">
        <button ngbDropdownToggle class="btn btn-link p-0 topbar-link dropdown-toggle drop-arrow-none px-2 d-inline-flex align-items-center">
            <img src="assets/images/users/user-2.jpg" width="32" class="rounded-circle me-2 d-flex"
                 alt="user-image">
            <div class="d-lg-flex align-items-center gap-2 d-none user-name-wrap">
                <h5 class="my-0">{{ userName }}</h5>
                <span class="d-flex align-middle"><ng-icon name="tablerChevronDown"/></span>
            </div>
        </button>
        <div ngbDropdownMenu class="dropdown-menu dropdown-menu-end">
            @for (item of menuItems; track $index) {
                <div>
                    @if (item.isHeader) {
                        <!-- Render header using the same structure as items for perfect alignment -->
                        <div class="dropdown-item py-2 d-flex align-items-center header-item disabled">
                            <span class="menu-item-icon" aria-hidden="true"></span>
                            <h6 class="m-0" dir="auto">{{ (item.label ?? '') | translate }}</h6>
                        </div>
                    }
                    @if (item.isDivider) {
                        <div class="dropdown-divider"></div>
                    }

                    @if (!item.isHeader && !item.isDivider ) {
                    <!-- <a  
                     (click)="handleItemClick(item)"
                      [routerLink]="item.url ? item.url : null"
                       class="dropdown-item"
                       [class]="item.class">
                        <ng-icon [name]="item.icon" size="17"
                                 class="align-middle d-inline-flex align-items-center me-2"/>
                        <span class="align-middle" [innerHTML]="item.label"></span>
                    </a> -->
                <a class="dropdown-item d-flex align-items-center" [class]="item.class"
                   (click)="handleItemClick(item)"
                   [routerLink]="item.url ? item.url : null">
                    <ng-icon [name]="item.icon" size="17"
                             class="menu-item-icon"/>
                    <span class="align-middle">{{ (item.label ?? '') | translate }}</span>
                </a>

                    }


                </div>
            }
        </div>
    </div>
</div>

<style>
  /* Direction-aware spacing between icon and text */
  .menu-item-icon {
    display: inline-flex;
    align-items: center;
    margin-inline-end: .5rem; /* LTR: space after icon */
  }
  [dir='rtl'] .menu-item-icon {
    margin-inline-end: 0;
    margin-inline-start: .5rem; /* RTL: space before icon */
  }
  /* Header alignment handled by spacer + px-3; no extra rules needed */
  /* Logical spacing between avatar and username/caret block */
  .user-name-wrap { margin-inline-start: .5rem; }
  [dir='rtl'] .user-name-wrap { margin-inline-start: 0; margin-inline-end: .5rem; }
</style>
