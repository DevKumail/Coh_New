<div class="d-flex row col-12 h-100">
<!-- [ngClass]="{
      'col-8': dataquestion?.node?.noteTitle,
      'col-12': !dataquestion?.node?.noteTitle
    }"  -->
    <div class="card  mt-2 d-flex flex-column">
    <form [formGroup]="clinicalForm" (ngSubmit)="submitVoice()">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0 fw-bold d-inline-flex align-items-center gap-2">
      <span>{{ 'CLINICAL_FREE_TEXT_NOTE_CREATE' | translate }}</span>
    </h5>

         <div class="row">
          <div class="col-12 d-flex justify-content-end gap-2">
              <button class="btn btn-danger"
               (click)="cancel()" type="button">{{ 'CANCEL' | translate }}</button>
            <button class="btn btn-info" [disabled]="clinicalForm.invalid" type="submit">{{ 'SAVE' | translate }}</button>
          </div>
        </div>

  </div>

  <div class="card-body flex-grow-1 overflow-auto">
      <div >
        <div class="row g-3 mb-2">
          <div [class]="hideTemplateDropdown ? 'col-sm-4 col-md-3' : 'col-sm-3'">
            <label class="form-label">Provider (For Signing) <span class="text-danger">*</span></label>
            <select class="form-select" formControlName="provider"
              (change)="onProviderchange()">
              <option value="null" disabled>Select Provider</option>
              <option *ngFor="let p of providers" [value]="p.code">{{ p.name }}</option>
            </select>
          </div>

          <div [class]="hideTemplateDropdown ? 'col-sm-4 col-md-3' : 'col-sm-3'">
            <label class="form-label">Description</label>
            <textarea class="form-control" style="height: 37px;" placeholder="Description" formControlName="description"></textarea>
          </div>

        </div>
      </div>

    <!-- Editable Template Content -->
    <div class="mt-3" *ngIf="dataquestion?.node?.noteTitle">
      <div class="card p-3">
        <div contenteditable="true" class="editable-title">
          <h2 class="fw-bold text-decoration-underline">{{ dataquestion?.node?.noteTitle }}</h2>
        </div>
        <div *ngFor="let q of dataquestion?.node?.questions" class="mt-2">
          <div contenteditable="true" class="editable-question">
            <app-question-view [question]="q"></app-question-view>
          </div>
        </div>
      </div>
    </div>

    <!-- Free Text Editor when no template -->
    <div class="mt-3" *ngIf="!dataquestion?.node?.noteTitle">
      <div class="card p-3">
        <h5 class="mb-3">Clinical Note Editor</h5>
        <div contenteditable="true"
             class="form-control editable-content"
             style="min-height: 400px; overflow-y: auto;"
             placeholder="Start typing your clinical note here...">
        </div>
      </div>
    </div>

  </div> <!-- card-body -->
</form>

</div> <!-- card -->

</div>

<style>
  .editable-title, .editable-question, .editable-content {
    outline: none;
    border: 1px dashed transparent;
    padding: 8px;
    border-radius: 4px;
    transition: all 0.2s;
  }

  .editable-title:hover, .editable-question:hover, .editable-content:hover {
    border-color: #0d6efd;
    background-color: #f8f9fa;
  }

  .editable-title:focus, .editable-question:focus, .editable-content:focus {
    border-color: #0d6efd;
    background-color: #ffffff;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.1);
  }

  .editable-content[contenteditable]:empty:before {
    content: attr(placeholder);
    color: #6c757d;
    font-style: italic;
  }
</style>
