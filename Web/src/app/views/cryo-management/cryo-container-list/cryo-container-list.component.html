<nav aria-label="breadcrumb">
  <ol class="breadcrumb bg-light bg-opacity-50 p-2">
    <li class="breadcrumb-item">
      <a href="javascript:void(0);">
        <lucide-angular [img]="homeIcon" class="fs-6"></lucide-angular>
        {{ 'Cryo Management' | translate }}
      </a>
    </li>
    <li class="d-flex align-items-center text-muted mx-1" aria-current="page">
      <ng-icon [name]="isRtl ? 'tablerChevronLeft' : 'tablerChevronRight'"></ng-icon>
    </li>
    <li class="breadcrumb-item active" aria-current="page">
      {{ 'Cryo Storage' | translate }}
    </li>
  </ol>
</nav>

<div class="card" *hasPermission="'Cryo Mangement:Cryo Manager:View'">
  <!-- <div class="accordion" id="CryoAccordion">
    <div class="accordion-item">
      <h2 class="accordion-header">
        <div class="d-flex w-100 align-items-center">
          <button #cryoToggler class="accordion-button collapsed d-flex no-accordion-caret flex-grow-1"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseCryo"
                  aria-expanded="false"
                  aria-controls="collapseCryo">
            <lucide-angular class="me-1 ms-1" [img]="headingIcon" aria-hidden="true"></lucide-angular>
            {{ 'CryoStorage' | translate }}
          </button>

          <button style="width: 100px;"
                  class="btn btn-success ms-1 me-1"
                  (click)="router.navigate(['/cryo/cryo-management/add'])">
            <ng-icon style="margin-bottom: 1px;" class="me-1 ms-1" name='tablerPlus'></ng-icon>
            <span class="me-1">{{ 'ADD' | translate }}</span>
          </button>
        </div>
      </h2>
    </div>
  </div> -->


   <div class="accordion" id="Cryoaccordion">
            <div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                      <div class="d-flex w-100 align-items-center">
                        <button #CryoToggler class="accordion-button collapsed d-flex no-accordion-caret flex-grow-1" type="button" data-bs-toggle="collapse" data-bs-target="#CryoManagement" aria-expanded="false" aria-controls="CryoManagement">
                          {{'CRYO_STORAGE' | translate}}
                        </button>
                        <button type="button" class="btn btn-link p-0 mb-1" title="Filter"
                                (click)="CryoToggler?.click()"
                                [style.marginInlineStart]="'auto'">
                                <ng-icon style="color: orange;" [name]="isCryoFiltered ? 'tablerFilterFill' : 'tablerFilter'" [ngClass]="{ 'blink': isCryoFiltered }"></ng-icon>
                            </button>
                            <button style="width: 100px;" class="btn btn-success ms-2 me-2" (click)="router.navigate(['/cryo/cryo-management/add'])"> 
                                <ng-icon style="margin-bottom: 1px;" class="me-2 ms-1" name='tablerPlus'></ng-icon>
                                <span class="me-1">
                                    {{'ADD' | translate}} 
                                </span>
                            </button>
                      </div> 
                    </h2>
                    <div id="CryoManagement" class="accordion-collapse collapse" data-bs-parent="#Cryoaccordion">
                      <div class="accordion-body">
                        <div class="card shadow-sm rounded-3">
                            <form *ngIf="FilterForm" [formGroup]="FilterForm">
                            <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-3 mb-2">
                                            <label>{{ 'DESCRIPTION' | translate }}</label>
                                            <input
                                                type="text"
                                                appFilledOnValue
                                                class="form-control"
                                                formControlName="description"
                                            />
                                        </div>
                                         <div class="col-md-3 mb-2">
                                            <label>{{ 'TYPE' | translate }}</label>
                                            <select
                                                appFilledOnValue
                                                class="form-control form-select"
                                                formControlName="type"
                                            >
                                                <option value="" disabled selected>-- {{ 'SELECT_TYPE' | translate }} --</option>
                                                <option
                                                    *ngFor="let item of Type"
                                                    [value]="item.code"
                                                >
                                                    {{ item.name }}
                                                </option>
                                            </select>
                                        </div>
                                      
                                        <div class="col-md-3 px-2" style="margin-top: 20px; text-align: right;">
                                            <button type="button" class="btn btn-light me-2" (click)="ClearFilter()">{{ 'CLEAR' | translate }}</button>
                                            <button type="submit" (click)="FilterCryo()" class="btn btn-primary">{{ 'SEARCH' | translate }}</button>
                                        </div>
                                    </div>
                            </div>
                            </form>

                           
                        </div>
                      </div>
                    </div>
                  </div>
            </div>
            </div>


  <!-- ✅ TABLE -->
  <div class="card-body">
    <table class="table table-bordered table-striped table-sm">
      <thead class="thead-sm">
      <tr class="text-uppercase text-center">
        <th>{{ 'Description' | translate }}</th>
        <th>{{ 'Type' | translate }}</th>
        <th>{{ 'Max Straws' | translate }}</th>
        <th>{{ 'Last Audit' | translate }}</th>
        <th style="width: 100px;" class="text-center">{{ 'ACTION' | translate }}</th>
      </tr>
      </thead>

      <tbody class="table-group-divider text-center">
      <tr *ngFor="let item of CryoPagedData">
        <td>{{ item.description || 'N/A' }}</td>
        <td>{{ getTypeText(item) }}</td>
        <td>{{ item.maxStrawsInLastLevel || 'N/A' }}</td>
        <td>{{ item.lastAudit || 'N/A' }}</td>

        <td class="text-center align-middle actions-cell">
          <div class="d-inline-flex justify-content-center align-items-center gap-2 text-nowrap actions-wrap">

            <!-- EDIT -->
            <lucide-angular
              *hasPermission="'Cryo Mangement:Cryo Manager:Edit'"
              [img]="editIcon"
              class="text-primary fs-5 action-icon"
              style="cursor: pointer;"
              title="Update"
              (click)="editContainer(item)">
            </lucide-angular>

            <!-- DELETE -->
            <lucide-angular
              *hasPermission="'Cryo Mangement:Cryo Manager:Delete'"
              [img]="deleteIcon"
              class="text-danger fs-5 action-icon"
              style="cursor: pointer;"
              title="Delete"
              (click)="deleteContainer(item.id!)">
            </lucide-angular>

          </div>
        </td>
      </tr>

      <tr *ngIf="CryoPagedData?.length === 0">
        <td colspan="5" class="text-center">{{ 'NO_DATA_FOUND' | translate }}</td>
      </tr>

      </tbody>
    </table>
  </div>

  <!-- ✅ Pagination Component -->
  <app-generic-pagination
      [totalItems]="CryoTotalItems"
      [pageSize]="PaginationInfo.RowsPerPage"
      [currentPage]="PaginationInfo.Page"
      (pageChanged)="onCryoPageChanged($event)">
  </app-generic-pagination>

</div>
