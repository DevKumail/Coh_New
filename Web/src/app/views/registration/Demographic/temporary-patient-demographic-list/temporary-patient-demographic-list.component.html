<!-- Breadcrumb -->
<nav aria-label="breadcrumb">
  <ol class="breadcrumb bg-light bg-opacity-50 p-2">
    <li class="breadcrumb-item">
      <a href="javascript:void(0);">
        <ng-icon name="tablerSmartHome"></ng-icon>
        Clinical
      </a>
    </li>
    <li class="d-flex align-items-center text-muted mx-1" aria-current="page">
      <ng-icon name="tablerChevronRight"></ng-icon>
    </li>
    <li class="breadcrumb-item active" aria-current="page">
      Temporary Demographics
    </li>
  </ol>
</nav>

<!-- <div class="container-fluid w-100"> -->
  <div class="card p-3 shadow">
    <!-- Header section -->
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h4 class="m-0 fw-bold">Temporary Demographics</h4>
      <div class="d-flex gap-2">
        <button
          class="btn btn-outline-secondary btn-sm"
          type="button"
          (click)="filter = !filter"
        >
          <ng-icon [name]="filter ? 'tablerFilterOff' : 'tablerFilter'" class="me-1"></ng-icon>
          {{ filter ? 'Hide Filters' : 'Show Filters' }}
        </button>
        <button
          class="btn btn-success btn-sm w-150"
          *hasPermission="'Registration:Temporary Patient Demographics:Add'"
          type="button"
          (click)="router.navigate(['/registration/temporary-patient-demographics-create'])"

        >
          <ng-icon name="tablerUserPlus" class="me-1 text-white"></ng-icon>
          Add Patient
        </button>
      </div>
    </div>

    <!-- Filters -->
    <div class="card card-body mb-3 border-0 bg-light" *ngIf="filter" [@slideFade]="filter">
      <form (ngSubmit)="submitFilter()" class="row g-3 align-items-end">
        <div class="col-12 col-sm-6 col-lg-3">
          <label class="form-label">MR NO</label>
          <input type="number" class="form-control" [(ngModel)]="FilterData.tempId" name="tempId" placeholder="e.g. 1023" />
        </div>
        <div class="col-12 col-sm-6 col-lg-3">
          <label class="form-label">Name</label>
          <input type="text" class="form-control" [(ngModel)]="FilterData.name" name="name" placeholder="Patient name" />
        </div>
        <div class="col-12 col-sm-6 col-lg-3">
          <label class="form-label">Date of Birth</label>
          <input type="date" class="form-control" [(ngModel)]="FilterData.dob" name="dob" />
        </div>
        <div class="col-12 col-sm-6 col-lg-3">
          <label class="form-label">Gender</label>
          <select class="form-select" [(ngModel)]="FilterData.gender" name="gender">
            <option [ngValue]="null">Any</option>
            <option [ngValue]="0">Male</option>
            <option [ngValue]="1">Female</option>
            <option [ngValue]="2">Other</option>
          </select>
        </div>
        <div class="col-12 d-flex gap-2 justify-content-end">
          <button type="button" class="btn btn-light" (click)="clearFilter()">
            Clear
          </button>
          <button type="submit" class="btn btn-primary">
            Apply
          </button>
        </div>
      </form>
    </div>

    <!-- Table -->
    <div class="table-responsive">
  <table class="table align-middle mb-0 table-striped">
                <thead class="thead-sm">
                    <tr class="text-uppercase text-center">
        <th>MR No</th>
        <th>Name</th>
        <th>Date of Birth</th>
        <th>Gender</th>
        <th class="text-center" style="width: 100px;">Actions</th>
      </tr>
    </thead>
    <tbody class="table-group-divider text-center">
      <tr *ngFor="let temp of pagedTemps">
        <td>{{ temp.tempId || 'N/A' }}</td>
        <td>{{ temp.personFullName || 'N/A'}}</td>
        <td>{{ temp.patientBirthDate || 'N/A' | date: 'MM/dd/yyyy' }}</td>
        <td>{{ genderLabel(temp.personSex) }}</td>
        <td class="text-center align-middle actions-cell">
          <div class="d-inline-flex justify-content-center align-items-center gap-2 text-nowrap actions-wrap">
            <ng-icon
              *hasPermission="'Registration:Temporary Patient Demographics:Edit'"
              name="tablerEdit"
              title="Update"
              aria-label="Update"
              class="text-primary fs-5 action-icon"
              style="cursor: pointer;"
              (click)="editTemp(temp)"
            ></ng-icon>
            <ng-icon
              *hasPermission="'Registration:Temporary Patient Demographics:Delete'"
              name="tablerTrash"
              title="Delete"
              aria-label="Delete"
              class="text-danger fs-5 action-icon"
              style="cursor: pointer;"
              (click)="Remove(temp.tempId)"
            ></ng-icon>
          </div>
        </td>
      </tr>
      <tr *ngIf="pagedTemps?.length === 0">
        <td colspan="5" class="text-center">No temporary patient found.</td>
      </tr>
    </tbody>
  </table>
    </div>

    <!-- Pagination Section -->
    <div class="d-flex flex-column align-items-center mt-3 gap-2">
      <div
        class="d-flex justify-content-end align-items-center bg-light rounded px-3 py-2 gap-3 w-100 flex-wrap"
      >
        <!-- Showing entries + dropdown -->
        <div class="d-flex align-items-center gap-2 flex-wrap">
          <div class="me-2">
            Showing {{ start + 1 }} to
            {{ end > totalRecord ? totalRecord : end }} of
            {{ totalRecord }} entries
          </div>
          <div>
            <select
              class="form-select form-select-sm"
              style="width: auto"
              [(ngModel)]="pageSize"
              [ngModelOptions]="{ standalone: true }"
              (change)="onPageSizeChange($event)"
            >
              <option *ngFor="let size of pageSizes" [value]="size">
                {{ size }}
              </option>
            </select>
          </div>
        </div>

        <!-- Pagination Controls -->
        <nav>
          <ul class="pagination pagination-sm mb-0">
            <li class="page-item" [class.disabled]="currentPage === 1">
              <button class="page-link" (click)="prevPage()">Previous</button>
            </li>
            <li
              class="page-item"
              *ngFor="let page of pageNumbers"
              [class.active]="page === currentPage"
            >
              <button class="page-link" (click)="goToPage(page)">
                {{ page }}
              </button>
            </li>
            <li
              class="page-item"
              [class.disabled]="currentPage === totalPages"
            >
              <button class="page-link" (click)="nextPage()">Next</button>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
<!-- </div> -->
