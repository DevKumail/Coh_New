<!-- Breadcrumb -->
<nav aria-label="breadcrumb">
  <ol class="breadcrumb bg-light bg-opacity-50 p-2">
    <li class="breadcrumb-item">
      <a href="javascript:void(0);">
        <ng-icon name="tablerSmartHome"></ng-icon>
    {{'REGISTRATION' | translate}}
      </a>
    </li>
    <li class="d-flex align-items-center text-muted mx-1" aria-current="page">
        <ng-icon class="me-1 ms-1"  [name]="isRtl ? 'tablerChevronLeft' : 'tablerChevronRight'"></ng-icon>
    </li>
    <li class="breadcrumb-item active" aria-current="page">
    {{'COVERAGES' | translate}}
    </li>
  </ol>
</nav>


<!-- <div class="container-fluid mt-3"> -->
    <div class="card shadow-lg p-2 rounded">
        <!-- ðŸ”· Optional Breadcrumb -->
        <div class="d-flex justify-content-between align-items-center p-2">
            <h4 class="fw-bold mb-0">{{'ADD_SUBSCRIBER' | translate}}</h4>
        </div>

        <!-- ðŸ“ Reactive Form Starts -->
        <form [formGroup]="subscriberForm" novalidate class="no-invalid-icon">
            <div class="row p-2">
                <!-- Type -->
                <div class="col-3">
                    <label>{{'TYPE' | translate}}</label><span class="text-danger"> *</span>
                   <select
                        class="form-select no-invalid-icon"
                        formControlName="CompanyOrIndividual"
                        (change)="showRelation()"
                        [class.is-invalid]="subscriberForm.get('CompanyOrIndividual')?.invalid && (subscriberForm.get('CompanyOrIndividual')?.touched || subscriberForm.touched)"
                    >
                        <option value="">{{'SELECT_TYPE' | translate}}</option>
                        <option *ngFor="let t of type" [value]="t.value" >
                            {{ t.label }}
                        </option>
                    </select>
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('CompanyOrIndividual')?.invalid && (subscriberForm.get('CompanyOrIndividual')?.touched || subscriberForm.touched)">
                        {{'TYPE_IS_REQUIRED' | translate}}
                        
                    </div>

                </div>

                <!-- Relationship Dropdown (Show only if isRelation == true) -->
                <div class="col-3">
                    <label>{{'RELATIONSHIP' | translate}}</label><span class="text-danger"> *</span>
                    <select
                        class="form-select no-invalid-icon"
                        formControlName="InsuranceRel"
                        id="InsuranceRel"
                        [disabled]="!isRelation"
                        [class.is-invalid]="subscriberForm.get('InsuranceRel')?.invalid && (subscriberForm.get('InsuranceRel')?.touched || subscriberForm.touched)"
                    >
                        <option value="">{{'SELECT_RELATIONSHIP' | translate}}</option>
                        <option
                            *ngFor="let t of InsuranceRelation"
                            [value]="t.id"
                        >
                            {{ t.name }}
                        </option>
                    </select>
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('InsuranceRel')?.invalid && (subscriberForm.get('InsuranceRel')?.touched || subscriberForm.touched)">
                        {{ 'RELATION_IS_REQUIRED' | translate }}
                    </div>
                </div>

                <!-- Title -->
                <div class="col-3">
                    <label>{{'TITLE' | translate}}</label><span class="text-danger"> *</span>
                    <select class="form-select no-invalid-icon" formControlName="Suffix"
                        [class.is-invalid]="subscriberForm.get('Suffix')?.invalid && (subscriberForm.get('Suffix')?.touched || isSubmitted)">
                        <option value="">{{'SELECT_TITLE' | translate}}</option>
                        <option *ngFor="let t of titles" [value]="t.name">
                            {{ t.name }}
                        </option>
                    </select>
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('Suffix')?.invalid && (subscriberForm.get('Suffix')?.touched || isSubmitted)">
                        {{'TITLE_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <!-- First Name -->
                <div class="col-3">
                    <label>{{'FIRST_NAME' | translate}}</label><span class="text-danger"> *</span>
                    <input
                        type="text"
                        class="form-control no-invalid-icon"
                        formControlName="FirstName"
                        placeholder="{{'ENTER_FIRST_NAME' | translate}}"
                        [class.is-invalid]="subscriberForm.get('FirstName')?.invalid && (subscriberForm.get('FirstName')?.touched || isSubmitted)"
                    />
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('FirstName')?.invalid && (subscriberForm.get('FirstName')?.touched || isSubmitted)">
                        {{'FIRST_NAME_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <!-- Middle Name -->
                <div class="col-3">
                    <label>{{'MIDDLE_NAME' | translate}}</label>
                    <input
                        type="text"
                        class="form-control no-invalid-icon"
                        formControlName="MiddleName"
                        placeholder="{{'ENTER_MIDDLE_NAME' | translate}}"
                    />
                </div>

                <!-- Last Name -->
                <div class="col-3">
                    <label>{{'LAST_NAME' | translate}}</label><span class="text-danger"> *</span>
                    <input
                        type="text"
                        class="form-control no-invalid-icon"
                        formControlName="LastName"
                        placeholder="{{'ENTER_LAST_NAME' | translate}}"
                        [class.is-invalid]="subscriberForm.get('LastName')?.invalid && (subscriberForm.get('LastName')?.touched || isSubmitted)"
                    />
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('LastName')?.invalid && (subscriberForm.get('LastName')?.touched || isSubmitted)">
                        {{'LAST_NAME_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <!-- Phone -->
                <div class="col-3">
                    <label>{{'CELL_PHONE' | translate}}</label><span class="text-danger"> *</span>

                    <input
                        type="text"
                        class="form-control no-invalid-icon"
                        formControlName="InsuredPhone"
                        placeholder="{{'ENTER_CELL_PHONE' | translate}}"
                        [mask]="'(00) 0000-0000'"
                        [class.is-invalid]="subscriberForm.get('InsuredPhone')?.invalid && (subscriberForm.get('InsuredPhone')?.touched || isSubmitted)"
                    />
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('InsuredPhone')?.invalid && (subscriberForm.get('InsuredPhone')?.touched || isSubmitted)">
                        {{'CELL_PHONE_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <div class="col-3">
                    <label>{{'DOB' | translate}}</label><span class="text-danger"> *</span>
                    <input
                        type="text"
                        class="form-control date no-invalid-icon"
                        formControlName="BirthDate"
                        data-provider="flatpickr"
                        id="BirthDate"
                        placeholder="{{'SELECT_DATE' | translate}}"
                        [class.is-invalid]="subscriberForm.get('BirthDate')?.invalid && (subscriberForm.get('BirthDate')?.touched || isSubmitted)"
                    />
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('BirthDate')?.invalid && (subscriberForm.get('BirthDate')?.touched || isSubmitted)">
                        {{'DOB_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <!-- Address -->
                <div class="col-3">
                    <label>{{'ADDRESS' | translate}}</label><span class="text-danger"> *</span>
                    <textarea
                        style="height: 36px;"
                        class="form-control no-invalid-icon"
                        formControlName="Address1"
                        placeholder="{{'ENTER_ADDRESS' | translate}}"
                        [class.is-invalid]="subscriberForm.get('Address1')?.invalid && (subscriberForm.get('Address1')?.touched || subscriberForm.touched)"
                    ></textarea>
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('Address1')?.invalid && (subscriberForm.get('Address1')?.touched || subscriberForm.touched)">
                        {{'ADDRESS_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <!-- Country -->
                <div class="col-3">
                    <label>{{'COUNTRY' | translate}}</label><span class="text-danger"> *</span>
                    <select
                        class="form-select no-invalid-icon"
                        formControlName="CountryId"
                        (change)="onCountryChange()"
                        [class.is-invalid]="subscriberForm.get('CountryId')?.invalid && (subscriberForm.get('CountryId')?.touched || isSubmitted)"
                    >
                        <option value="">{{'SELECT_COUNTRY' | translate}}</option>
                        <option *ngFor="let c of Country" [value]="c.code">
                            {{ c.name }}
                        </option>
                    </select>
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('CountryId')?.invalid && (subscriberForm.get('CountryId')?.touched || isSubmitted)">
                        {{'COUNTRY_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <!-- State -->
                <div class="col-3">
                    <label>{{'STATE' | translate}}</label><span class="text-danger"> *</span>
                    <select
                        class="form-select no-invalid-icon"
                        formControlName="StateId"
                        (change)="onStateChange()"
                        [class.is-invalid]="subscriberForm.get('StateId')?.invalid && (subscriberForm.get('StateId')?.touched || isSubmitted)"
                    >
                        <option value="">{{'SELECT_STATE' | translate}}</option>
                        <option *ngFor="let s of states" [value]="s.stateId">
                            {{ s.name }}
                        </option>
                    </select>
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('StateId')?.invalid && (subscriberForm.get('StateId')?.touched || isSubmitted)">
                        {{'STATE_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <!-- City -->
                <div class="col-3">
                    <label>{{'CITY' | translate}}</label><span class="text-danger"> *</span>
                    <select class="form-select no-invalid-icon" formControlName="CityId"
                        [class.is-invalid]="subscriberForm.get('CityId')?.invalid && (subscriberForm.get('CityId')?.touched || isSubmitted)">
                        <option value="">{{'SELECT_CITY' | translate}}</option>
                        <option *ngFor="let c of city" [value]="c.cityId">
                            {{ c.name }}
                        </option>
                    </select>
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('CityId')?.invalid && (subscriberForm.get('CityId')?.touched || isSubmitted)">
                        {{'CITY_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <!-- Zip -->
                <div class="col-3">
                    <label>{{'ZIP_CODE' | translate}}</label><span class="text-danger"> *</span>
                    <input
                        type="text"
                        class="form-control no-invalid-icon"
                        formControlName="ZipCode"
                        placeholder="{{'ENTER_ZIP_CODE' | translate}}"
                        [mask]="'00000'"
                        [class.is-invalid]="subscriberForm.get('ZipCode')?.invalid && (subscriberForm.get('ZipCode')?.touched || isSubmitted)"
                    />
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('ZipCode')?.invalid && (subscriberForm.get('ZipCode')?.touched || isSubmitted)">
                        {{'ZIP_CODE_IS_REQUIRED' | translate}}
                        Zip code is required.
                    </div>
                </div>

                <!-- Insurance Carrier -->
                <div class="col-3">
                    <label>{{'INSURANCE_CARRIER' | translate}}</label
                    ><span class="text-danger"> *</span>
                    <select
                        class="form-select no-invalid-icon"
                        formControlName="CarrierId"
                        (change)="onCarrierChange()"
                        [class.is-invalid]="subscriberForm.get('CarrierId')?.invalid && (subscriberForm.get('CarrierId')?.touched || isSubmitted)"
                    >
                        <option value="">{{'SELECT_INSURANCE_CARRIER' | translate}}</option>
                        <option *ngFor="let p of BLPayer" [value]="p.code">
                            {{ p.name }}
                        </option>
                    </select>
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('CarrierId')?.invalid && (subscriberForm.get('CarrierId')?.touched || isSubmitted)">
                        {{'INSURANCE_CARRIER_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <div class="col-3">
                    <label>{{'POLICY_PLAN' | translate}}</label><span class="text-danger"> *</span>
                    <select
                        class="form-select policy-select no-invalid-icon"
                        formControlName="selectedBLPayerPlan"
                        [class.is-invalid]="subscriberForm.get('selectedBLPayerPlan')?.invalid && (subscriberForm.get('selectedBLPayerPlan')?.touched || isSubmitted)"
                    >
                        <option value="">{{'SELECT_POLICY_PLAN' | translate}}</option>
                        <option
                            *ngFor="let plan of BLPayerPlan"
                            [value]="plan.code"
                            [title]="plan.name"
                        >
                            {{ plan.name }}
                        </option>
                    </select>
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('selectedBLPayerPlan')?.invalid && (subscriberForm.get('selectedBLPayerPlan')?.touched || isSubmitted)">
                        {{'POLICY_PLAN_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <!-- Package -->
                <div class="col-3">
                    <label>{{'PACKAGE' | translate}}</label><span class="text-danger"> *</span>
                    <select
                        class="form-select no-invalid-icon"
                        formControlName="selectedBLPayerPackage"
                        [class.is-invalid]="subscriberForm.get('selectedBLPayerPackage')?.invalid && (subscriberForm.get('selectedBLPayerPackage')?.touched || isSubmitted)"
                    >
                        <option value="">{{'SELECT_PACKAGE' | translate}}</option>
                        <option
                            *ngFor="let pack of BLPayerPackage"
                            [value]="pack.code"
                        >
                            {{ pack.name }}
                        </option>
                    </select>
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('selectedBLPayerPackage')?.invalid && (subscriberForm.get('selectedBLPayerPackage')?.touched || isSubmitted)">
                        {{'PACKAGE_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <!-- Gender -->
                <div class="col-3">
                    <label>{{'GENDER' | translate}}</label><span class="text-danger"> *</span>
                    <select class="form-select no-invalid-icon" formControlName="Sex"
                        [class.is-invalid]="subscriberForm.get('Sex')?.invalid && (subscriberForm.get('Sex')?.touched || isSubmitted)">
                        <option value="">{{'SELECT_GENDER' | translate}}</option>
                        <option *ngFor="let g of genders" [value]="g.name">
                            {{ g.name }}
                        </option>
                    </select>
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('Sex')?.invalid && (subscriberForm.get('Sex')?.touched || isSubmitted)">
                        {{'GENDER_IS_REQUIRED' | translate}}
                        
                    </div>
                </div>

                <!-- Insured ID -->
                <div class="col-3">
                    <label>{{'MEMBER_ID_EMP_ID' | translate}}</label
                    ><span class="text-danger"> *</span>
                    <input
                        type="text"
                        class="form-control no-invalid-icon"
                        formControlName="InsuredIdNo"
                        placeholder="{{'ENTER_MEMBER_ID_EMP_ID' | translate}}"
                        [class.is-invalid]="subscriberForm.get('InsuredIdNo')?.invalid && (subscriberForm.get('InsuredIdNo')?.touched || isSubmitted)"
                    />
                    <div class="invalid-feedback d-block" *ngIf="subscriberForm.get('InsuredIdNo')?.invalid && (subscriberForm.get('InsuredIdNo')?.touched || isSubmitted)">
                        {{'MEMBER_ID_EMP_ID_IS_REQUIRED' | translate}}
                    </div>
                </div>

                <!-- Active -->
                <div class="col-3 d-flex align-items-center mt-4">
                    <input
                        type="checkbox"
                        class="form-check-input mb-1"
                        formControlName="Inactive"
                        />
                        <label class="form-check-label ms-2">{{'ACTIVE' | translate}}</label>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="card mt-4">
                        <b>
                                <a
                                    class="nav-item nav-link active mt-2"
                                    style="color: rgb(8, 8, 167); margin-left: 20px"
                                >
                                    {{'COPAY_FLAT_RATE' | translate}}
                                </a>
                        </b>
                        <div class="row mt-2 mb-2 mx-2">
                            <div class="col-6">
                                <input
                                    type="number"
                                    class="form-control w-100 no-invalid-icon"
                                    placeholder="{{'OP' | translate}}"
                                    formControlName="OpCopay"
                                />
                            </div>
                            <div class="col-6">
                                <input
                                    type="number"
                                    class="form-control w-100 no-invalid-icon"
                                    placeholder="{{ 'IP' | translate}}"
                                    formControlName="Deductibles"
                                />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card mt-4">
                        <b>
                                <a
                                    class="nav-item nav-link active mt-2"
                                    style="color: rgb(8, 8, 167); margin-left: 20px"
                                >
                                    {{'DEDUCTABLE_AMOUNT' | translate}}
                                </a>
                        </b>
                        <div class="row mt-2 mb-2 mx-2">
                            <div class="col-6">
                                <input
                                    type="number"
                                    class="form-control w-100 no-invalid-icon"
                                    placeholder="{{'PC' | translate}}"
                                    formControlName="Copay"
                                />
                            </div>
                            <div class="col-6">
                                <input
                                    type="number"
                                    class="form-control w-100 no-invalid-icon"
                                    placeholder="{{ 'DN' | translate}}"
                                    formControlName="DNDeductible"
                                />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <ul
                        ngbNav
                        #nav="ngbNav"
                        [(activeId)]="activeTabId"
                        class="nav nav-tabs mb-3"
                    >
                        <li [ngbNavItem]="1">
                            <a ngbNavLink>{{'POLICY_INFO' | translate}}</a>
                            <ng-template ngbNavContent>
                                <!-- âœ… Add Policy Button -->
                                <button
                                    class="btn btn-sm btn-primary mb-2"
                                    (click)="openPolicyModal(modalLg)"
                                >
                                    + {{'ADD_POLICY' | translate}}
                                </button>

                                <!-- âœ… Table -->
                                <div class="table-responsive">
                                    <table class="table align-middle mb-0">
                                        <thead class="thead-sm">
                                            <tr
                                                class="text-uppercase text-center"
                                            >
                                                <th>{{'EFFECTIVE_DATE' | translate}}</th>
                                                <th>{{'TERMINATION_DATE' | translate}}</th>
                                                <th>{{'POLICY_NO' | translate}}</th>
                                                <th>{{'NO_OF_VISITS' | translate}}</th>
                                                <th>{{'AMOUNT' | translate}}</th>
                                                <th>{{'STATUS' | translate}}</th>
                                            </tr>
                                        </thead>
                                        <tbody class="text-center">
                                            <tr
                                                *ngFor="
                                                    let policy of patient?.policyList
                                                "
                                            >
                                                <td>
                                                    {{
                                                        policy.effectiveDate
                                                            | date
                                                                : "dd/MM/yyyy h:mm a"
                                                    }}
                                                </td>
                                                <td>
                                                    {{
                                                        policy.terminationDate
                                                            | date
                                                                : "dd/MM/yyyy h:mm a"
                                                    }}
                                                </td>
                                                <td>
                                                    {{
                                                        policy.groupNo || "N/A"
                                                    }}
                                                </td>
                                                <td>
                                                    {{
                                                        policy.noOfVisits ||
                                                            "N/A"
                                                    }}
                                                </td>
                                                <td>
                                                    {{ policy.amount | currency }}
                                                </td>
                                                <td>
                                                    {{ policy.status === 1 ? 'Active' : policy.status === 0 ? 'InActive' : (policy.status || 'N/A') }}
                                                </td>
                                            </tr>
                                            <tr
                                                *ngIf="
                                                    patient?.policyList
                                                        ?.length === 0
                                                "
                                            >
                                                <td colspan="6">
                                                    {{'NO_DATA_FOUND' | translate}}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- âœ… Modal Template -->
                                <ng-template #modalLg let-modal>
                                    <form
                                        [formGroup]="policyForm1"
                                        (ngSubmit)="onSavePolicy(modal)"
                                    >
                                        <div class="modal-header">
                                            <h5 class="modal-title">
                                                {{'ADD_POLICY' | translate}}
                                            </h5>
                                            <button
                                                type="button"
                                                class="btn-close"
                                                aria-label="Close"
                                                (click)="modal.dismiss()"
                                            ></button>
                                        </div>

                                        <div class="modal-body">
                                            <div class="row">
                                                <div class="col-4">
                                                    <label
                                                        >{{'EFFECTIVE_DATE' | translate}}</label
                                                    >
                                                    <input
                                                        type="date"
                                                        class="form-control"
                                                        formControlName="effectiveDate"
                                                    />
                                                </div>
                                                <div class="col-4">
                                                    <label
                                                        >{{'TERMINATION_DATE' | translate}}</label
                                                    >
                                                    <input
                                                        type="date"
                                                        class="form-control"
                                                        formControlName="terminationDate"
                                                    />
                                                </div>
                                                <div class="col-4">
                                                    <label>{{'POLICY_NO' | translate}}</label>
                                                    <input
                                                        type="text"
                                                        class="form-control"
                                                        formControlName="groupNo"
                                                        placeholder="{{'ENTER_POLICY_NO' | translate}}"
                                                    />
                                                </div>
                                            </div>

                                            <div class="row mt-2">
                                                <div class="col-4">
                                                    <label>{{'NO_OF_VISITS' | translate}}</label>
                                                    <input
                                                        type="number"
                                                        class="form-control"
                                                        formControlName="noOfVisits"
                                                        placeholder="{{'ENTER_NO_OF_VISITS' | translate}}"
                                                    />
                                                </div>
                                                <div class="col-4">
                                                    <label>{{'AMOUNT' | translate}}</label>
                                                    <input
                                                        type="number"
                                                        class="form-control"
                                                        formControlName="amount"
                                                        placeholder="{{'ENTER_AMOUNT' | translate}}"
                                                    />
                                                </div>
                                                <div class="col-4">
                                                    <label>{{'STATUS' | translate}}</label>
                                                    <select class="form-select" formControlName="status">
                                                        <option [ngValue]="null">{{'SELECT_STATUS' | translate}}</option>
                                                        <option [ngValue]="1">{{'ACTIVE'}}</option>
                                                        <option [ngValue]="0">{{'INACTIVE'}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- <div class="modal-footer">
                                            <button
                                                class="btn btn-secondary"
                                                type="button"
                                                (click)="modal.dismiss()"
                                            >
                                                {{'CANCEL' | translate}}
                                            </button>
                                            <button
                                                class="btn btn-primary"
                                                type="submit"
                                                [disabled]="policyForm1.invalid"
                                            >
                                                {{'SAVE' | translate}}
                                            </button>
                                        </div> -->
                                        <div
                                            class="modal-footer justify-content-end"
                                        >
                                            <button
                                                class="btn btn-secondary me-1 ms-1"
                                                type="button"
                                                (click)="modal.dismiss()"
                                            >
                                                {{'CLOSE' | translate}}
                                            </button>
                                            <button
                                                class="btn btn-primary"
                                                type="submit"
                                                [disabled]="policyForm1.invalid"
                                            >
                                                {{'SUBMIT' | translate}}
                                            </button>
                                        </div>
                                    </form>
                                </ng-template>
                            </ng-template>
                        </li>

                        <!-- ðŸŸ  Tab 2: Copay Info -->
                        <li [ngbNavItem]="2">
                            <a ngbNavLink>{{'COPAY_INFO' | translate}}</a>
                            <ng-template ngbNavContent>
                                <form [formGroup]="copayForm" class="row g-3">
                                    <div class="col-6">
                                        <label>{{'TYPE_OF_SERVICE' | translate}}</label>
                                        <input
                                            type="number"
                                            class="form-control w-100"
                                            placeholder="{{'ENTER_TYPE_OF_SERVICE' | translate}}"
                                            formControlName="serviceType"
                                        />
                                    </div>
                                    <div class="col-md-6">
                                        <label>{{'COPAY_PERCENTAGE' | translate}}</label>
                                        <input
                                            type="number"
                                            class="form-control no-invalid-icon"
                                            formControlName="copayPercentage"
                                            placeholder="{{'ENTER_COPAY_PERCENTAGE' | translate}}"
                                        />
                                    </div>
                                </form>
                            </ng-template>
                        </li>
                    </ul>

                    <div [ngbNavOutlet]="nav"></div>
                </div>
            </div>

            <!-- Buttons -->
            <div class="d-flex justify-content-between mt-4">
                <!-- Left buttons: Save & Cancel -->
                <div>
                    <button
                        type="button"
                        class="btn btn-info"
                        (click)="openLargeModal(modalLg)"
                    >
                        {{'ADD_CARD' | translate}}
                    </button>
                </div>

                <!-- Right button: Add Card -->
                <div>
                    <button
                        type="submit"
                        class="btn btn-success me-1 ms-1"
                        (click)="insertsubscriber()"
                    >
                        {{'SUBMIT' | translate}}
                    </button>
                    <button
                        type="button"
                        class="btn btn-secondary ms-2"
                        (click)="cancel()"
                    >
                        {{'BACK' | translate}}
                    </button>

                </div>
            </div>
            <ng-template #modalLg let-modal>
                <div class="modal-header">
                    <h4 class="modal-title">{{'UPLOAD_IMAGE' | translate}}</h4>
                    <button
                        type="button"
                        class="btn-close"
                        aria-label="Close"
                        (click)="modal.dismiss('Cross click')"
                    ></button>
                </div>

                <div class="modal-body">
                    <div class="d-flex flex-column align-items-start">
                        <label class="form-label mb-2">{{'SELECT_IMAGE' | translate}}</label>

                        <div class="avatar-xxl">
                            <file-pond
                                name="filepond"
                                [options]="userFilePondConfig"
                                className="filepond-input-circle"
                            >
                            </file-pond>
                        </div>

                        <!-- ðŸ‘‡ Left-aligned Read Image Button -->
                        <button
                            pButton
                            type="button"
                            class="btn btn-primary mt-3"
                        >
                            {{'READ_IMAGE' | translate}}
                        </button>
                    </div>

                    <!-- Close button aligned to right -->
                    <div
                        class="d-flex justify-content-end align-items-center mt-4"
                    >
                        <button
                            pButton
                            type="button"
                            class="btn btn-primary"
                            (click)="modal.close()"
                        >
                            {{'CLOSE' | translate}}
                        </button>
                    </div>
                </div>
            </ng-template>
        </form>
    </div>
<!-- </div> -->
