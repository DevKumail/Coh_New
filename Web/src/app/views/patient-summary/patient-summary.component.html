<div class="mt-1 p-0" [style.--patient-summary-offset.px]="offset">
  <div class="row layout-relative">

    <!-- Toggle Handles -->
    <button type="button" class="toggle-btn left" (click)="toggleLeft()" [attr.aria-expanded]="!leftCollapsed">
      {{ leftCollapsed ? '›' : '‹' }}
    </button>
    <button type="button" class="toggle-btn right" (click)="toggleRight()" [attr.aria-expanded]="!rightCollapsed">
      {{ rightCollapsed ? '‹' : '›' }}
    </button>

    <!-- Main Wrapper (expands when right sidebar collapsed) -->
    <div [ngClass]="{ 'col-10': !rightCollapsed, 'col-12': rightCollapsed }">
      <div class="row g-0">

        <!-- Left Sidebar: keep visible, shrink on collapse -->
        <div [ngClass]="leftCollapsed ? 'col-auto' : 'col-2'" class="p-0 ms-0 mb-2 mb-sm-0 fixed-height d-flex">
          <div class="h-100 w-100">
            <app-side-menu [selected]="selectedId" (select)="onSelect($event)" [collapsed]="leftCollapsed"></app-side-menu>
          </div>
        </div>

        <!-- Center Content -->
        <div [ngClass]="{ 'col-10': !leftCollapsed, 'col': leftCollapsed }" class="fixed-height">
          <div>
            <app-content-section [selected]="selectedId"></app-content-section>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Sidebar -->
    <div *ngIf="!rightCollapsed" class="col-2 bg-dark text-white rounded fixed-height">
      <div>
        <app-notes></app-notes>
      </div>
    </div>
  </div>
</div>
