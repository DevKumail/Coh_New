<ng-container *ngIf="(patientBannerService.patientData$ | async)">
  <div class="mt-1 p-0" [style.--patient-summary-offset.px]="offset">
    <div class="row layout-relative">

      <button type="button" class="toggle-btn left" (click)="toggleLeft()" [attr.aria-expanded]="!leftCollapsed">
        {{ leftCollapsed ? '›' : '‹' }}
      </button>
      
      <div class="col-12">
        <div class="row g-0">

          <div [ngClass]="leftCollapsed ? 'col-auto' : 'col-2'" class="p-0 ms-0 mb-2 mb-sm-0 fixed-height d-flex">
            <div class="h-100 w-100">
              <app-ivf-side-menu [selected]="selectedId" (select)="onSelect($event)" [collapsed]="leftCollapsed"></app-ivf-side-menu>
            </div>
          </div>

          <div [ngClass]="{ 'col-10': !leftCollapsed, 'col': leftCollapsed }" class="fixed-height">
            <app-ivf-ps-demographic *ngIf="selectedId==='demographic'"></app-ivf-ps-demographic>
            <app-ivf-ps-medical-history *ngIf="selectedId==='medical-history'"></app-ivf-ps-medical-history>
            <app-ivf-ps-lab-diagnostics *ngIf="selectedId==='lab-diagnostics'"></app-ivf-ps-lab-diagnostics>
            <app-ivf-ps-billing *ngIf="selectedId==='billing'"></app-ivf-ps-billing>
            <app-ivf-ps-message *ngIf="selectedId==='message'"></app-ivf-ps-message>
            <app-ivf-ps-cycle *ngIf="selectedId==='cycle'"></app-ivf-ps-cycle>
            <app-ivf-ps-switch-partner *ngIf="selectedId==='switch-partner'"></app-ivf-ps-switch-partner>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-container>

<!-- Advanced Filter Modal (patient search) -->
<app-advance-search-modal (onPatientSelect)="onPatientPicked($event)"></app-advance-search-modal>
