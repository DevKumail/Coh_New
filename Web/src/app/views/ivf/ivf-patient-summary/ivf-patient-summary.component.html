<div class="mt-1 p-0" [style.--patient-summary-offset.px]="offset" *ngIf="isCoupleLink">
  <div class="row layout-relative">

    <button type="button" class="toggle-btn left" (click)="toggleLeft()" [attr.aria-expanded]="!leftCollapsed">
      {{ leftCollapsed ? '›' : '‹' }}
    </button>
    
    <div class="col-12">
      <div class="row g-0">

        <div [ngClass]="leftCollapsed ? 'col-auto' : 'col-2'" class="p-0 ms-0 mb-2 mb-sm-0 fixed-height d-flex">
          <div class="h-100 w-100">
            <app-ivf-side-menu [selected]="selectedId" (select)="onSelect($event)" [collapsed]="leftCollapsed"></app-ivf-side-menu>
          </div>
        </div>

        <div [ngClass]="{ 'col-10': !leftCollapsed, 'col': leftCollapsed }" class="fixed-height">
          <ng-container *ngIf="(patientBannerService.patientData$ | async) as pdata; else emptyState">
            <app-ivf-ps-demographic *ngIf="selectedId==='demographic'"></app-ivf-ps-demographic>
            <app-ivf-ps-medical-history *ngIf="selectedId==='medical-history'"></app-ivf-ps-medical-history>
            <app-social-history *ngIf="selectedId==='social-history'"></app-social-history>
            <app-family-history *ngIf="selectedId==='family-history'"></app-family-history>
            <app-ivf-ps-pathology-results *ngIf="selectedId==='pathology-results'"></app-ivf-ps-pathology-results>
            <app-ivf-ps-lab-orders *ngIf="selectedId==='lab-orders'"></app-ivf-ps-lab-orders>
            <app-semen-list *ngIf="selectedId==='semen-analysis'"></app-semen-list>
            <app-ivf-ps-billing *ngIf="selectedId==='billing'"></app-ivf-ps-billing>
            <app-ivf-ps-message *ngIf="selectedId==='message'"></app-ivf-ps-message>
            <app-ivf-ps-cycle *ngIf="selectedId==='cycle'"></app-ivf-ps-cycle>
            <app-ivf-ps-switch-partner *ngIf="selectedId==='switch-partner'"></app-ivf-ps-switch-partner>
          </ng-container>
          <ng-template #emptyState>
            <div class="d-flex align-items-center justify-content-center h-100 text-muted">
              Select or search a patient to load summary
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>


<div *ngIf="!isivfstart || !isCoupleLink" class="row g-3 align-items-center justify-content-center my-4">
  <div class="col-12 col-md-8 col-lg-6">
    <div class="card h-100 compact-card">
          <div class="card-body d-flex justify-content-center align-items-center text-center" style="min-height: 280px">
            <div *ngIf="!isCoupleLink">
              <div class="display-6 text-warning">!</div>
              <!-- <div class="fw-semibold mb-1">Validation Error</div> -->
              <div class="fw-semibold mb-1">this patient has no partner go to IVF dashboard and link a partner...</div>
              <button type="button" 
              class="btn btn-success btn-lg position-absolute top-50 start-50 translate-middle shadow" 
              (click)="GotoDashboard()">Go to IVF Dashboard</button>
            </div>

            <div *ngIf="isCoupleLink">
              <div class="display-6 text-warning">!</div>
              <div class="fw-semibold mb-1">Start IVF Process.......</div>
              <button type="button" 
              class="btn btn-success btn-lg position-absolute top-50 start-50 translate-middle shadow" 
              (click)="StartIvf()">Start</button>
            </div>
          </div>
        </div>
      </div>
    </div>

<!-- Advanced Filter Modal (patient search) -->
<app-advance-search-modal (onPatientSelect)="onPatientPicked($event)"></app-advance-search-modal>
